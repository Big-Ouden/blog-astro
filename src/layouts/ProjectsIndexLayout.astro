---

import BaseLayout from '@layouts/BaseLayout.astro';
import {getLangFromUrl, useTranslations } from '@i18n/utils';

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);

interface Props {
	pageTitle?: String;
	allProjects: any[];
};

const {
	pageTitle = "Projects",
	allProjects,
} = Astro.props;

const sortedProjects = allProjects.sort((a: any, b:any) => {
	return new Date(b.data.pubDate).getTime() - new Date(a.data.pubDate).getTime();
}); 

---

<BaseLayout >

	<div class="flex flex-col justify-between space-y-10  mb-5">

  	{(pageTitle  ? (
    	<h1 class="text-3xl">{pageTitle}<span class="text-info">.</span></h1>
      <slot name="introduction" class=""/>
    ): (
    	<slot name="introduction" class=""/>
      	<div></div>
      ))}
  </div>

	<div id="projects-list" class="grid grid-cols-1 md:grid-cols-2  gap-y-5 gap-x-5">

		{sortedProjects.map((project:any) => 
		<a href={project.data.isExternal ? project.data.url : `/projects/${project.id}`}>
				<div class="flex flex-col p-4 space-y-2 border-4 border-base-200 w-full h-fit bg-base-100 backdrop-opacity-50">
					<div id="project-title" class="text-xl"> <span class="text-info">
						#</span>  <span class="decoration-info decoration-2 underline underline-offset-2">{project.data.title}</span>
					</div>
					<div id="project-desc" class="text-base">
						<p>
							{(project.data.description.length > 50) ? (
            		project.data.description.slice(0, 50) + "..."
            		) : (
            		project.data.description
							)}
						</p>
					</div>
				</div>
			</a>
		)}
	</div>


</BaseLayout>
